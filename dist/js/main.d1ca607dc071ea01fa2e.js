(()=>{class t{constructor(){this.themeManager=null,this.navigationManager=null,this.resumeHandler=null,this.init()}async init(){try{this.themeManager=new ThemeManager,this.navigationManager=new NavigationManager,this.resumeHandler=new ResumeHandler,this.updatePersonalInfo(),this.loadProjects(),this.initSkillProgress(),this.bindGlobalEvents(),console.log("作品集网站初始化完成")}catch(t){console.error("初始化失败:",t)}}loadProjects(){const t=document.getElementById("projects-grid");t&&(t.innerHTML=CONFIG.projects.map(t=>`\n            <article class="project-card" data-project-id="${t.id}" data-stage="${t.stage}">\n                <div class="project-image" style="background: ${t.gradient}">\n                    <div class="project-overlay">\n                        <div class="project-links">\n                            <a href="${t.demoUrl}" class="project-link" title="查看演示" target="_blank">\n                                <i class="fas fa-external-link-alt"></i>\n                            </a>\n                            <a href="${t.codeUrl}" class="project-link" title="查看源代码" target="_blank">\n                                <i class="fab fa-github"></i>\n                            </a>\n                        </div>\n                    </div>\n                    <div class="project-icon">\n                        <i class="${t.icon}"></i>\n                    </div>\n                    <div class="project-stage ${t.stage}">\n                        ${t.stageText}\n                    </div>\n                </div>\n                <div class="project-content">\n                    <div class="project-meta">\n                        <span class="project-duration">${t.duration}</span>\n                        <span class="project-difficulty ${t.difficulty}">${t.difficulty}</span>\n                    </div>\n                    <h3 class="project-title">${t.title}</h3>\n                    <p class="project-description">${t.description}</p>\n                    \n                    <div class="project-learnings">\n                        <strong>主要收获：</strong>\n                        <ul>\n                            ${t.learnings.map(t=>`<li>${t}</li>`).join("")}\n                        </ul>\n                    </div>\n                    \n                    <div class="project-tech">\n                        ${t.technologies.map(t=>`<span class="tech-tag">${t}</span>`).join("")}\n                    </div>\n                </div>\n            </article>\n        `).join(""))}updatePersonalInfo(){const t=CONFIG.personalInfo;document.title=`${t.name} - ${t.title}`;const e=document.querySelector(".brand-text");e&&(e.textContent=t.name);const n=document.querySelector(".logo");if(n){const e=t.logo||t.name.substring(0,2);n.textContent=e}const o=document.querySelector(".hero-title .name");o&&(o.textContent=t.name);const s=document.querySelector(".hero-title .title");s&&(s.textContent=t.title),this.updateContactInfo(t)}updateContactInfo(t){const e=document.querySelector(".contact-item:nth-child(1) p");e&&(e.textContent=t.email);const n=document.querySelector(".contact-item:nth-child(2) p");n&&(n.textContent=t.github);const o=document.querySelector(".contact-item:nth-child(3) p");o&&(o.textContent=t.phone);const s=document.querySelector(".about .btn");s&&"#contact"===s.getAttribute("href")&&(s.textContent=`联系${t.name}`)}initSkillProgress(){setTimeout(()=>{document.querySelectorAll(".skill-progress").forEach(t=>{const e=t.dataset.level;e&&setTimeout(()=>{t.style.width=`${e}%`},100)})},500)}bindGlobalEvents(){const t=document.getElementById("contact-form");t&&t.addEventListener("submit",t=>{this.handleContactSubmit(t)}),window.addEventListener("load",()=>{this.handlePageLoad()}),window.addEventListener("error",t=>{console.error("全局错误:",t.error)})}handleContactSubmit(t){t.preventDefault();const e=new FormData(t.target),n=Object.fromEntries(e);this.validateContactForm(n)&&(this.showFormSuccess(),t.target.reset())}validateContactForm(t){const{name:e,email:n,message:o}=t;return e.trim()?n.trim()&&this.isValidEmail(n)?!!o.trim()||(this.showFormError("请输入消息内容"),!1):(this.showFormError("请输入有效的邮箱地址"),!1):(this.showFormError("请输入您的姓名"),!1)}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}showFormSuccess(){this.showToast("消息发送成功！我会尽快回复您。","success")}showFormError(t){this.showToast(t,"error")}showToast(t,e="info"){const n=document.createElement("div");n.textContent=t,n.style.cssText=`\n            position: fixed;\n            top: 100px;\n            right: 20px;\n            background: ${"error"===e?"#e74c3c":"success"===e?"#27ae60":"#3498db"};\n            color: white;\n            padding: 12px 20px;\n            border-radius: var(--border-radius);\n            box-shadow: var(--shadow-lg);\n            z-index: 10000;\n            transition: all 0.3s ease;\n        `,document.body.appendChild(n),setTimeout(()=>{n.style.opacity="0",n.style.transform="translateX(100%)",setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},300)},3e3)}handlePageLoad(){document.body.classList.add("loaded"),this.initSkillProgress()}}document.addEventListener("DOMContentLoaded",()=>{new t})})();